<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>QR Code Maker</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <h1>QR Code Maker</h1>
  <form id="qrForm">
  <input type="text" name="qrdata" id="qrdata" placeholder="Enter text or URL" required><br>
  <label>Foreground:</label>
  <input type="color" name="fg" value="#000000">
  <label>Background:</label>
  <input type="color" name="bg" value="#ffffff"><br>
  <label><input type="radio" name="colortype" value="solid" checked> Solid</label>
  <label><input type="radio" name="colortype" value="gradient"> Gradient</label><br><br>
  <label>QR Title (optional):</label>
<input type="text" name="title" placeholder="e.g. My Instagram" />
<label>Theme:</label>
<select name="theme">
  <option value="rounded">Rounded</option>
  <option value="gapped">Gapped Squares</option>
  <option value="horizontal">Horizontal Bars</option>
  <option value="vertical">Vertical Bars</option>
  <option value="circle">Circles</option>
</select>
  <button type="submit">Generate</button>
</form>

<a id="downloadLink" style="display:none;" download="qr.png">Download QR Code</a><br>
<img id="qrImage" style="margin-top: 20px; max-width: 300px;">
  <script>
  document.getElementById('qrForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    const formData = new FormData(e.target);
    const response = await fetch('/generate', {
  method: 'POST',
  body: new FormData(e.target)
});
const blob = await response.blob();
const imageUrl = URL.createObjectURL(blob);

document.getElementById('qrImage').src = imageUrl;
document.getElementById('downloadLink').href = imageUrl;
document.getElementById('downloadLink').style.display = 'inline-block';

  });
</script>
</body>
</html>
